<!-- Section Trustpilot Personnalisable -->
<div class="trustpilot-reviews-section" 
     style="background-color: {{ section.settings.background_color }}; 
            padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px 0;">
  
  <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 20px;">
    
    {% if section.settings.show_title %}
    <h2 class="trustpilot-title" 
        style="color: {{ section.settings.title_color }}; 
               font-size: {{ section.settings.title_size }}px; 
               text-align: {{ section.settings.text_align }}; 
               margin-bottom: 35px;">
      {{ section.settings.title }}
    </h2>
    {% endif %}
    
    <div class="trustpilot-content" style="text-align: {{ section.settings.text_align }};">
      
      <!-- Ligne principale avec note et √©toiles -->
      <div class="rating-row" style="margin-bottom: 25px;">
        
        {% if section.settings.show_excellent %}
        <span class="excellent-label" 
              style="color: {{ section.settings.text_color }}; 
                     font-size: 22px; 
                     font-weight: 500; 
                     margin-right: 15px;">
          {{ section.settings.excellent_text }}
        </span>
        {% endif %}
        
        {% if section.settings.show_rating %}
        <span class="rating-score" 
              style="color: {{ section.settings.rating_color }}; 
                     font-size: 26px; 
                     font-weight: 700; 
                     margin-right: 20px;">
          {{ section.settings.rating_value }} / 5
        </span>
        {% endif %}
        
        {% if section.settings.show_stars %}
        <div class="stars-container" style="display: inline-flex; gap: 4px;">
          {% for i in (1..5) %}
          <div class="trustpilot-star" 
               style="width: {{ section.settings.star_size }}px; 
                      height: {{ section.settings.star_size }}px; 
                      background-color: {{ section.settings.star_color }}; 
                      border-radius: 4px; 
                      display: flex; 
                      align-items: center; 
                      justify-content: center;">
            <span style="color: white; 
                         font-size: 20px; 
                         font-weight: bold;">‚òÖ</span>
          </div>
          {% endfor %}
        </div>
        {% endif %}
        
      </div>
      
      <!-- Ligne nombre d'avis -->
      {% if section.settings.show_review_count %}
      <div class="reviews-info" 
           style="color: {{ section.settings.info_color }}; 
                  font-size: 18px; 
                  margin-bottom: 25px;">
        {{ section.settings.reviews_text_prefix }}
        <span style="color: {{ section.settings.count_color }}; 
                     font-weight: 600; 
                     text-decoration: underline;">
          {{ section.settings.review_count }}
        </span>
        {{ section.settings.reviews_text_suffix }}
      </div>
      {% endif %}
      
      <!-- Logo Trustpilot -->
      {% if section.settings.show_trustpilot_logo %}
      <div class="trustpilot-brand" style="display: inline-flex; align-items: center; gap: 8px;">
        <div class="brand-star" 
             style="width: 22px; 
                    height: 22px; 
                    background-color: {{ section.settings.star_color }}; 
                    border-radius: 3px; 
                    display: flex; 
                    align-items: center; 
                    justify-content: center;">
          <span style="color: white; font-size: 14px;">‚òÖ</span>
        </div>
        <span style="color: {{ section.settings.logo_text_color }}; 
                     font-size: 18px; 
                     font-weight: 600;">
          {{ section.settings.trustpilot_text }}
        </span>
      </div>
      {% endif %}
      
    </div>
  </div>
</div>

<!-- CSS responsive -->
<style>
  .trustpilot-reviews-section {
    width: 100%;
  }
  
  .rating-row {
    display: flex;
    align-items: center;
    justify-content: {{ section.settings.text_align }};
    flex-wrap: wrap;
    gap: 10px;
  }
  
  .trustpilot-star {
    transition: transform 0.2s ease;
  }
  
  .trustpilot-star:hover {
    transform: scale(1.05);
  }
  
  @media (max-width: 768px) {
    .rating-row {
      flex-direction: column;
      gap: 15px;
    }
    
    .trustpilot-title {
      font-size: {{ section.settings.title_size | minus: 10 }}px !important;
    }
    
    .excellent-label {
      font-size: 18px !important;
    }
    
    .rating-score {
      font-size: 22px !important;
    }
    
    .trustpilot-star {
      width: {{ section.settings.star_size | minus: 8 }}px !important;
      height: {{ section.settings.star_size | minus: 8 }}px !important;
    }
  }
</style>

{% schema %}
{
  "name": "Avis Trustpilot",
  "class": "trustpilot-section",
  "settings": [
    {
      "type": "header",
      "content": "üì± Contenu"
    },
    {
      "type": "checkbox",
      "id": "show_title",
      "label": "Afficher le titre",
      "default": true
    },
    {
      "type": "text",
      "id": "title",
      "label": "Titre principal",
      "default": "Nos clients en parlent le mieux"
    },
    {
      "type": "checkbox",
      "id": "show_excellent",
      "label": "Afficher 'Excellent'",
      "default": true
    },
    {
      "type": "text",
      "id": "excellent_text",
      "label": "Texte 'Excellent'",
      "default": "Excellent"
    },
    {
      "type": "checkbox",
      "id": "show_rating",
      "label": "Afficher la note",
      "default": true
    },
    {
      "type": "text",
      "id": "rating_value",
      "label": "Note (ex: 4,7)",
      "default": "4,7"
    },
    {
      "type": "checkbox",
      "id": "show_stars",
      "label": "Afficher les √©toiles",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_review_count",
      "label": "Afficher le nombre d'avis",
      "default": true
    },
    {
      "type": "text",
      "id": "reviews_text_prefix",
      "label": "Texte avant le nombre",
      "default": "bas√© sur +"
    },
    {
      "type": "text",
      "id": "review_count",
      "label": "Nombre d'avis",
      "default": "1 067"
    },
    {
      "type": "text",
      "id": "reviews_text_suffix",
      "label": "Texte apr√®s le nombre",
      "default": " avis"
    },
    {
      "type": "checkbox",
      "id": "show_trustpilot_logo",
      "label": "Afficher le logo Trustpilot",
      "default": true
    },
    {
      "type": "text",
      "id": "trustpilot_text",
      "label": "Texte Trustpilot",
      "default": "Trustpilot"
    },
    {
      "type": "header",
      "content": "üé® Design"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Couleur d'arri√®re-plan",
      "default": "#ffffff"
    },
    {
      "type": "select",
      "id": "text_align",
      "label": "Alignement du texte",
      "options": [
        {"value": "left", "label": "Gauche"},
        {"value": "center", "label": "Centre"},
        {"value": "right", "label": "Droite"}
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Espacement haut",
      "min": 0,
      "max": 100,
      "step": 10,
      "default": 50,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Espacement bas",
      "min": 0,
      "max": 100,
      "step": 10,
      "default": 50,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "üìù Couleurs"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Couleur du titre",
      "default": "#1a202c"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Couleur du texte",
      "default": "#2d3748"
    },
    {
      "type": "color",
      "id": "rating_color",
      "label": "Couleur de la note",
      "default": "#1a202c"
    },
    {
      "type": "color",
      "id": "star_color",
      "label": "Couleur des √©toiles",
      "default": "#00b67a"
    },
    {
      "type": "color",
      "id": "info_color",
      "label": "Couleur texte info",
      "default": "#718096"
    },
    {
      "type": "color",
      "id": "count_color",
      "label": "Couleur du nombre",
      "default": "#1a202c"
    },
    {
      "type": "color",
      "id": "logo_text_color",
      "label": "Couleur texte logo",
      "default": "#1a202c"
    },
    {
      "type": "header",
      "content": "üìè Tailles"
    },
    {
      "type": "range",
      "id": "title_size",
      "label": "Taille du titre",
      "min": 20,
      "max": 60,
      "step": 5,
      "default": 40,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "star_size",
      "label": "Taille des √©toiles",
      "min": 25,
      "max": 50,
      "step": 5,
      "default": 35,
      "unit": "px"
    }
  ],
  "presets": [
    {
      "name": "Avis Trustpilot"
    }
  ]
}
{% endschema %}